{"version":3,"file":"index.modern.js","sources":["../src/hooks/useScript.js","../src/hooks/useGoogleMaps.js","../src/utils/utils.js","../src/hooks/useMemoCompare.js","../src/map/overlay.js","../src/map/overlay-view.js","../src/map/markers.js","../src/map/map.js","../src/google-map.js"],"sourcesContent":["/* eslint-disable no-unused-expressions */\nimport { useEffect, useState } from 'react'\n\n/**\n * @description Hook to load external script.\n * @param {Object} script - Script to load.\n * @param {string} script.src - Script source.\n * @param {Object} [script.attributes] - Attributes to add to the script tag.\n * @param {Object} [script.callbacks] - Callbacks executed on completion.\n * @param {Function} [script.callbacks.onLoadCallback] - Callback executed on completion in case of success.\n * @param {Function} [script.callbacks.onErrorCallback] - Callbacks executed on completion in case of error.\n * @param {string} [script.elementIdToAppend] - HTML element id to append the script to. Default is HTML HEAD.\n * @returns {\"idle\" | \"loading\" | \"ready\" | \"error\"} status\n *\n * @example\n * const status = useScript({\n * \t\tsrc: \"https://script-to-load.js\",\n * \t\tattributes: { id: \"scriptId\", class: \"script-class\" },\n * \t\tcallbacks: {\n * \t\t\tonLoadCallback: onLoadFunc,\n * \t\t\tonErrorCallback: onErrorFunc,\n * \t\t},\n * \t\telementIdToAppend: \"script-container\"\n * })\n */\n\nexport const useScript = (\n\tscript = {\n\t\tsrc: '',\n\t\tattributes: {},\n\t\tcallbacks: { onLoadCallback: null, onErrorCallback: null },\n\t\telementIdToAppend: null,\n\t},\n\tforcedStatus = undefined,\n) => {\n\t// Keep track of script status (\"idle\", \"loading\", \"ready\", \"error\")\n\tconst [status, setStatus] = useState(script.src ? 'loading' : 'idle')\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (forcedStatus) {\n\t\t\t\tsetStatus(forcedStatus)\n\t\t\t\treturn () => {\n\t\t\t\t\t// do nothing\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Allow falsy src value if waiting on other data needed for\n\t\t\t// constructing the script URL passed to this hook.\n\t\t\tif (!script.src) {\n\t\t\t\tsetStatus('idle')\n\t\t\t\treturn\n\t\t\t}\n\t\t\t// Fetch existing script element by src\n\t\t\t// It may have been added by another instance of this hook\n\t\t\tlet scriptToAdd = document.querySelector(`script[src=\"${script.src}\"]`)\n\t\t\tif (!scriptToAdd) {\n\t\t\t\t// Create script\n\t\t\t\tscriptToAdd = document.createElement('script')\n\t\t\t\tscriptToAdd.src = script.src\n\t\t\t\tscriptToAdd.async = true\n\t\t\t\tscriptToAdd.setAttribute('data-status', 'loading')\n\t\t\t\t// Add other script attributes, if they exist\n\t\t\t\tscript.attributes && Object.entries(script.attributes).length > 0\n\t\t\t\t\t? Object.entries(script.attributes).map(([key, value]) => scriptToAdd.setAttribute(key, value))\n\t\t\t\t\t: null\n\t\t\t\t// Add script to document body\n\t\t\t\tif (script.elementIdToAppend && document.getElementById(script.elementIdToAppend)) {\n\t\t\t\t\tdocument.getElementById(script.elementIdToAppend).appendChild(scriptToAdd)\n\t\t\t\t} else {\n\t\t\t\t\tdocument.body.appendChild(scriptToAdd)\n\t\t\t\t}\n\t\t\t\t// Store status in attribute on script\n\t\t\t\t// This can be read by other instances of this hook\n\t\t\t\tconst setAttributeFromEvent = (event) => {\n\t\t\t\t\tscriptToAdd.setAttribute('data-status', event.type === 'load' ? 'ready' : 'error')\n\t\t\t\t}\n\t\t\t\tscriptToAdd.addEventListener('load', setAttributeFromEvent)\n\t\t\t\tscriptToAdd.addEventListener('error', setAttributeFromEvent)\n\t\t\t} else {\n\t\t\t\t// Grab existing script status from attribute and set to state.\n\t\t\t\tconst currentScriptStatus = scriptToAdd.getAttribute('data-status')\n\t\t\t\tswitch (currentScriptStatus) {\n\t\t\t\t\tcase 'load':\n\t\t\t\t\tcase 'ready':\n\t\t\t\t\t\tscript.callbacks?.onLoadCallback ? script.callbacks.onLoadCallback() : null\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\tscript.callbacks?.onErrorCallback ? script.callbacks.onErrorCallback() : null\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// loading: do nothing\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tsetStatus(currentScriptStatus)\n\t\t\t}\n\t\t\t// Script event handler to update status in state\n\t\t\t// Note: Even if the script already exists we still need to add\n\t\t\t// event handlers to update the state for this hook instance.\n\t\t\tconst setStateFromEvent = (event) => {\n\t\t\t\tevent.type === 'load'\n\t\t\t\t\t? script.callbacks?.onLoadCallback\n\t\t\t\t\t\t? script.callbacks.onLoadCallback()\n\t\t\t\t\t\t: null\n\t\t\t\t\t: script.callbacks?.onErrorCallback\n\t\t\t\t\t? script.callbacks.onErrorCallback()\n\t\t\t\t\t: null\n\t\t\t\tsetStatus(event.type === 'load' ? 'ready' : 'error')\n\t\t\t}\n\t\t\t// Add event listeners\n\t\t\tscriptToAdd.addEventListener('load', setStateFromEvent)\n\t\t\tscriptToAdd.addEventListener('error', setStateFromEvent)\n\t\t\t// Remove event listeners on cleanup\n\t\t\treturn () => {\n\t\t\t\tif (scriptToAdd) {\n\t\t\t\t\tscriptToAdd.removeEventListener('load', setStateFromEvent)\n\t\t\t\t\tscriptToAdd.removeEventListener('error', setStateFromEvent)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Re-run useEffect if script changes\n\t\t[script, forcedStatus, status],\n\t)\n\n\treturn status\n}\n","import { useScript } from './useScript'\n\n/**\n * @returns {\"idle\" | \"loading\" | \"ready\" | \"error\"} status\n */\nexport const useGoogleMaps = ({\n\tapiKey,\n\tlibraries = [],\n\tloadScriptExternally = false,\n\tstatus = 'idle',\n\texternalApiParams,\n\tcallback,\n}) => {\n\t// eslint-disable-next-line no-undef\n\tif (typeof window !== 'undefined') window.googleMapsCallback = callback\n\tconst apiParams = new URLSearchParams(externalApiParams)?.toString()\n\tconst script = apiKey\n\t\t? {\n\t\t\t\tsrc: `https://maps.googleapis.com/maps/api/js?key=${apiKey}&callback=googleMapsCallback&libraries=${libraries?.join(\n\t\t\t\t\t',',\n\t\t\t\t)}${apiParams ? '&' + apiParams : ''}`,\n\t\t\t\tattributes: { id: 'googleMapsApi' },\n\t\t  }\n\t\t: {\n\t\t\t\tsrc: `https://maps.googleapis.com/maps/api/js?callback=googleMapsCallback&libraries=${libraries?.join(',')}`,\n\t\t\t\tattributes: { id: 'googleMapsApi' },\n\t\t  }\n\n\treturn useScript(script, loadScriptExternally ? status : undefined)\n}\n","export const isArraysEqualEps = (arrayA, arrayB, eps) => {\n\tif (arrayA && arrayB) {\n\t\tfor (let i = 0; i !== arrayA.length; ++i) {\n\t\t\tif (Math.abs(arrayA[i] - arrayB[i]) > eps) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t\treturn true\n\t}\n\treturn false\n}\n","import { useEffect, useRef } from 'react'\n\n/**\n * A hook that compares the previous and current values of a reference.\n * @param {any} value - the current value of the reference\n * @param {function} compare - a function that compares the previous and current values\n * @returns {any} the previous value of the reference\n * @ref https://usehooks.com/useMemoCompare/\n */\nconst useMemoCompare = (next, compare) => {\n\t// Ref for storing previous value\n\tconst previousRef = useRef()\n\tconst previous = previousRef.current\n\t// Pass previous and next value to compare function\n\t// to determine whether to consider them equal.\n\tconst isEqual = compare(previous, next)\n\t// If not equal update previousRef to next value.\n\t// We only update if not equal so that this hook continues to return\n\t// the same old value if compare keeps returning true.\n\tuseEffect(() => {\n\t\tif (!isEqual) {\n\t\t\tpreviousRef.current = next\n\t\t}\n\t})\n\t// Finally, if equal then return the previous value\n\treturn isEqual ? previous : next\n}\n\nexport default useMemoCompare\n","import { bool, element, func, number, object, shape, string } from 'prop-types'\n\n// return lat, lng from LatLngLiteral\nconst getLatLng = (LatLng) => {\n\ttry {\n\t\tconst latLng = { lat: LatLng.lat(), lng: LatLng.lng() }\n\t\treturn latLng\n\t} catch (e) {\n\t\treturn LatLng\n\t}\n}\n\n/**\n * @param {HTMLElement} container - The HTML container element for the overlay.\n * @param {google.maps.MapPanes} pane - The HTML container element for the overlay.\n * @param {google.maps.LatLng | google.maps.LatLngLiteral} position - The geographical location of the overlay.\n * @param {google.maps} maps - The Google Maps API.\n * @param {object} drag - The drag configuration of the overlay.\n * @param {boolean} drag.draggable - If true, the marker can be dragged. Default value is false.\n * @param {function} drag.onDragStart - This event is fired when the user starts dragging the marker.\n * @param {function} drag.onDrag - This event is repeatedly fired while the user drags the marker.\n * @param {function} drag.onDragEnd - This event is fired when the user stops dragging the marker.\n * @returns {void}\n */\nconst createOverlay = ({ container, pane, position, maps, drag }) => {\n\tclass Overlay extends maps.OverlayView {\n\t\tconstructor(container, pane, position) {\n\t\t\tsuper()\n\t\t\tthis.container = container\n\t\t\tthis.pane = pane\n\t\t\tthis.position = position\n\t\t}\n\n\t\thandleMove = (e, isTouch = false) => {\n\t\t\tlet that = this\n\t\t\tconst x = isTouch ? e.touches.item(0).clientX : e.clientX\n\t\t\tconst y = isTouch ? e.touches.item(0).clientY : e.clientY\n\n\t\t\tlet origin = that.get('origin'),\n\t\t\t\tleft = origin.clientX - x,\n\t\t\t\ttop = origin.clientY - y,\n\t\t\t\tpos = that.getProjection().fromLatLngToDivPixel(that.position),\n\t\t\t\tlatLng = that.getProjection().fromDivPixelToLatLng(new maps.Point(pos.x - left, pos.y - top))\n\t\t\tthat.set('position', latLng)\n\t\t\tthat.set('origin', e)\n\t\t\tthat.draw()\n\t\t\tdrag.onDrag(e, { latLng: getLatLng(latLng) })\n\t\t}\n\n\t\thandleStart = (e, eventName = 'mousemove') => {\n\t\t\tlet that = this\n\n\t\t\tthis.container.style.cursor = 'grabbing'\n\t\t\tthat.map.set('draggable', false)\n\t\t\tthat.set('origin', e)\n\n\t\t\tdrag.onDragStart(e, { latLng: getLatLng(this.position) })\n\n\t\t\tthat.moveHandler = maps.event.addDomListener(this.get('map').getDiv(), eventName, (e) => this.handleMove(e, eventName === 'touchmove'))\n\t\t}\n\n\t\thandleEnd = (e) => {\n\t\t\tlet that = this;\n\n\t\t\tthat.map.set('draggable', true)\n\t\t\tthis.container.style.cursor = 'default'\n\t\t\tmaps.event.removeListener(that.moveHandler)\n\t\t\tdrag.onDragEnd(e, { latLng: getLatLng(that.position) })\n\t\t}\n\n\t\t/**\n\t\t * onAdd is called when the map's panes are ready and the overlay has been\n\t\t * added to the map.\n\t\t */\n\t\tonAdd = () => {\n\t\t\t// manage draggable\n\t\t\tif (drag?.draggable) {\n\t\t\t\tmaps.event.addDomListener(this.get('map').getDiv(), 'mouseleave', () => {\n\t\t\t\t\tmaps.event.trigger(container, 'mouseup')\n\t\t\t\t})\n\t\t\t\tmaps.event.addDomListener(this.container, 'mousedown', this.handleStart)\n\t\t\t\tmaps.event.addDomListener(container, 'mouseup', this.handleEnd)\n\n\t\t\t\tmaps.event.addDomListener(this.get('map').getDiv(), 'touchcancel', () => {\n\t\t\t\t\tmaps.event.trigger(container, 'touchend')\n\t\t\t\t})\n\t\t\t\tmaps.event.addDomListener(this.container, 'touchstart', (e) => this.handleStart(e, 'touchmove'))\n\t\t\t\tmaps.event.addDomListener(container, 'touchend', this.handleEnd)\n\t\t\t}\n\t\t\t// Add the element to the pane.\n\t\t\tconst pane = this.getPanes()[this.pane]\n\t\t\tpane?.classList.add('google-map-markers-overlay')\n\t\t\tpane?.appendChild(this.container)\n\t\t}\n\n\t\tdraw = () => {\n\t\t\tconst projection = this.getProjection()\n\t\t\t// Computes the pixel coordinates of the given geographical location in the DOM element that holds the draggable map.\n\t\t\tconst point = projection.fromLatLngToDivPixel(this.position)\n\t\t\tif (point === null) return\n\t\t\tthis.container.style.transform = `translate(${point.x}px, ${point.y}px)`\n\t\t\tthis.container.style.width = '0px'\n\t\t\tthis.container.style.height = '0px'\n\t\t}\n\n\t\t/**\n\t\t * The onRemove() method will be called automatically from the API if\n\t\t * we ever set the overlay's map property to 'null'.\n\t\t */\n\t\tonRemove = () => {\n\t\t\tif (this.container.parentNode !== null) {\n\t\t\t\t// remove DOM listeners\n\t\t\t\tmaps.event.clearInstanceListeners(this.container)\n\t\t\t\tthis.container.parentNode.removeChild(this.container)\n\t\t\t}\n\t\t}\n\t}\n\n\treturn new Overlay(container, pane, position)\n}\n\ncreateOverlay.propTypes = {\n\t/**\n\t * The HTML container element for the overlay.\n\t */\n\tcontainer: element.isRequired,\n\t/**\n\t * The HTML container element for the overlay.\n\t * @ref [MapPanes](https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapPanes)\n\t * @default 'floatPane'\n\t * @type {google.maps.MapPanes}\n\t * @required\n\t */\n\tpane: string.isRequired,\n\t/**\n\t * The geographical location of the overlay.\n\t * @type {google.maps.LatLng | google.maps.LatLngLiteral}\n\t * @required\n\t * @ref [LatLng](https://developers.google.com/maps/documentation/javascript/reference/coordinates#LatLng)\n\t */\n\tposition: shape({\n\t\tlat: number.isRequired,\n\t\tlng: number.isRequired,\n\t}).isRequired,\n\t/**\n\t * The Google Maps API.\n\t */\n\tmaps: object.isRequired,\n\t/**\n\t * The draggable options of the overlay.\n\t * @type {object}\n\t * @default { draggable: false, onDragStart: noop, onDrag: noop, onDragEnd: noop }\n\t */\n\tdrag: shape({\n\t\tdraggable: bool,\n\t\tonDragStart: func,\n\t\tonDrag: func,\n\t\tonDragEnd: func,\n\t}),\n}\n\nexport default createOverlay\n","import { bool, func, node, number, object, shape, string } from 'prop-types'\nimport { useEffect, useMemo } from 'react'\nimport { createPortal } from 'react-dom'\nimport useMemoCompare from '../hooks/useMemoCompare'\nimport createOverlay from './overlay'\n\n/**\n * @param {google.maps.MapPanes} pane - The pane on which to display the overlay. This is the Pane name, not the Pane itself. Defaults to floatPane.\n * @param {google.maps.LatLng | google.maps.LatLngLiteral} position - The geographical location of the overlay.\n * @param {google.maps.Map} map - The map on which to display the overlay.\n * @param {google.maps} maps - The Google Maps API.\n * @param {number} zIndex - The z-index of the overlay.\n * @param {ReactNode} children - The children of the OverlayView - the Marker component.\n * @param {object} drag - The drag configuration of the overlay.\n * @param {boolean} drag.draggable - If true, the marker can be dragged. Default value is false.\n * @param {function} drag.onDragStart - This event is fired when the user starts dragging the marker.\n * @param {function} drag.onDrag - This event is repeatedly fired while the user drags the marker.\n * @param {function} drag.onDragEnd - This event is fired when the user stops dragging the marker.\n * @returns {void}\n * @ref [MapPanes](https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapPanes)\n */\nconst OverlayView = ({ pane = 'floatPane', position, map, maps, zIndex = 0, children, drag }) => {\n\tconst container = useMemo(() => {\n\t\t// eslint-disable-next-line no-undef\n\t\tconst div = document.createElement('div')\n\t\tdiv.style.position = 'absolute'\n\t\treturn div\n\t}, [])\n\n\tconst overlay = useMemo(() => {\n\t\treturn createOverlay({ container, pane, position, maps, drag })\n\t}, [container, drag, maps, pane, position])\n\n\t// Because React does not do deep comparisons, a custom hook is used.\n\t// This fixes the issue where the overlay is not updated when the position changes.\n\tconst childrenProps = useMemoCompare(children?.props, (prev, next) => {\n\t\treturn prev && prev.lat === next.lat && prev.lng === next.lng\n\t})\n\n\tuseEffect(() => {\n\t\tif (!overlay.map) {\n\t\t\toverlay?.setMap(map)\n\t\t\treturn () => {\n\t\t\t\toverlay?.setMap(null)\n\t\t\t}\n\t\t}\n\t\t// overlay depends on map, so we don't need to add it to the dependency array\n\t\t// otherwise, it will re-render the overlay every time the map changes\n\t\t//? added childrenProps to the dependency array to re-render the overlay when the children props change.\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [map, childrenProps])\n\n\t// to move the container to the foreground and background\n\tuseEffect(() => {\n\t\tcontainer.style.zIndex = `${zIndex}`\n\t}, [zIndex, container])\n\n\treturn createPortal(children, container)\n}\n\nOverlayView.propTypes = {\n\t/**\n\t * The HTML container element for the overlay.\n\t * @ref [MapPanes](https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapPanes)\n\t * @default 'floatPane'\n\t * @type {google.maps.MapPanes}\n\t */\n\tpane: string,\n\t/**\n\t * The geographical location of the overlay.\n\t * @type {google.maps.LatLng | google.maps.LatLngLiteral}\n\t * @required\n\t * @ref [LatLng](https://developers.google.com/maps/documentation/javascript/reference/coordinates#LatLng)\n\t */\n\tposition: shape({\n\t\tlat: number.isRequired,\n\t\tlng: number.isRequired,\n\t}).isRequired,\n\t/**\n\t * The map on which to display the overlay.\n\t * @type {google.maps.Map}\n\t * @required\n\t * @ref [Map](https://developers.google.com/maps/documentation/javascript/reference/map#Map)\n\t */\n\tmap: object.isRequired,\n\t/**\n\t * The Google Maps API.\n\t * @type {object}\n\t * @required\n\t * @ref [Google Maps API](https://developers.google.com/maps/documentation/javascript/reference)\n\t */\n\tmaps: object.isRequired,\n\t/**\n\t * The z-index of the overlay.\n\t * @type {number}\n\t * @default 0\n\t */\n\tzIndex: number,\n\t/**\n\t * The children of the OverlayView.\n\t * @type {ReactNode}\n\t * @required\n\t * @ref [ReactNode](https://reactjs.org/docs/react-api.html#reactnode)\n\t */\n\tchildren: node.isRequired,\n\t/**\n\t * The drag configuration of the overlay.\n\t * @type {object}\n\t * @default { draggable: false, onDragStart: noop, onDrag: noop, onDragEnd: noop }\n\t */\n\tdrag: shape({\n\t\tdraggable: bool,\n\t\tonDragStart: func,\n\t\tonDrag: func,\n\t\tonDragEnd: func,\n\t}),\n}\n\nexport default OverlayView\n","import { node, object } from 'prop-types'\nimport React, { Children, cloneElement, isValidElement, useMemo } from 'react'\nimport OverlayView from './overlay-view'\n\nconst noop = () => {}\n\nconst MapMarkers = ({ children, map, maps }) => {\n\tconst markers = useMemo(() => {\n\t\tif (!map || !maps) return []\n\n\t\treturn Children.map(children, (child) => {\n\t\t\tif (isValidElement(child)) {\n\t\t\t\tconst latLng = { lat: child.props.lat, lng: child.props.lng }\n\t\t\t\tconst { zIndex, draggable = false, onDragStart = noop, onDrag = noop, onDragEnd = noop } = child.props || {}\n\n\t\t\t\t// clone child without draggable props\n\t\t\t\tchild = cloneElement(child, {\n\t\t\t\t\t...child.props,\n\t\t\t\t\tdraggable: undefined,\n\t\t\t\t\tonDragStart: undefined,\n\t\t\t\t\tonDrag: undefined,\n\t\t\t\t\tonDragEnd: undefined,\n\t\t\t\t})\n\n\t\t\t\treturn (\n\t\t\t\t\t<OverlayView\n\t\t\t\t\t\tposition={latLng}\n\t\t\t\t\t\tmap={map}\n\t\t\t\t\t\tmaps={maps}\n\t\t\t\t\t\tzIndex={zIndex}\n\t\t\t\t\t\tdrag={{\n\t\t\t\t\t\t\tdraggable,\n\t\t\t\t\t\t\tonDragStart,\n\t\t\t\t\t\t\tonDrag,\n\t\t\t\t\t\t\tonDragEnd,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{child}\n\t\t\t\t\t</OverlayView>\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\t}, [children, map, maps])\n\n\treturn <div>{markers}</div>\n}\n\nMapMarkers.propTypes = {\n\t/**\n\t * The Markers on the Map.\n\t * @type {ReactNode}\n\t * @required\n\t */\n\tchildren: node.isRequired,\n\t/**\n\t * The Google Maps instance.\n\t * @type {object}\n\t * @required\n\t */\n\tmap: object,\n\t/**\n\t * The Google Maps API.\n\t * @type {object}\n\t * @required\n\t */\n\tmaps: object.isRequired,\n}\n\nexport default MapMarkers\n","import { arrayOf, func, node, number, object, oneOfType, shape, string } from 'prop-types'\nimport React, { useCallback, useEffect, useRef, useState } from 'react'\nimport { isArraysEqualEps } from '../utils/utils'\nimport MapMarkers from './markers'\n\nconst EPS = 0.00001\n\nconst MapComponent = ({\n\tchildren = null,\n\tstyle = {\n\t\twidth: '100%',\n\t\theight: '100%',\n\t\tleft: 0,\n\t\ttop: 0,\n\t\tmargin: 0,\n\t\tpadding: 0,\n\t\tposition: 'absolute',\n\t},\n\tdefaultCenter,\n\tdefaultZoom,\n\tonGoogleApiLoaded = () => {},\n\tonChange = () => {},\n\toptions = {},\n\tevents = [],\n}) => {\n\tconst mapRef = useRef(null)\n\tconst prevBoundsRef = useRef(null)\n\tconst [map, setMap] = useState(null)\n\tconst [maps, setMaps] = useState(null)\n\tconst [googleApiCalled, setGoogleApiCalled] = useState(false)\n\n\tconst onIdle = useCallback(() => {\n\t\ttry {\n\t\t\tconst zoom = map.getZoom()\n\t\t\tconst bounds = map.getBounds()\n\t\t\tconst centerLatLng = map.getCenter()\n\n\t\t\tconst ne = bounds.getNorthEast()\n\t\t\tconst sw = bounds.getSouthWest()\n\t\t\tconst boundsArray = [sw.lng(), sw.lat(), ne.lng(), ne.lat()]\n\n\t\t\tif (!isArraysEqualEps(boundsArray, prevBoundsRef.current, EPS)) {\n\t\t\t\tif (onChange) {\n\t\t\t\t\tonChange({\n\t\t\t\t\t\tzoom,\n\t\t\t\t\t\tcenter: [centerLatLng.lng(), centerLatLng.lat()],\n\t\t\t\t\t\tbounds,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tprevBoundsRef.current = boundsArray\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t}\n\t}, [map, onChange])\n\n\tuseEffect(() => {\n\t\tif (mapRef.current && !map) {\n\t\t\tsetMap(\n\t\t\t\tnew window.google.maps.Map(mapRef.current, {\n\t\t\t\t\tcenter: defaultCenter,\n\t\t\t\t\tzoom: defaultZoom,\n\t\t\t\t\t...options,\n\t\t\t\t}),\n\t\t\t)\n\t\t\tsetMaps(window.google.maps)\n\t\t}\n\t}, [defaultCenter, defaultZoom, map, mapRef, options])\n\n\tuseEffect(() => {\n\t\tif (map) {\n\t\t\tif (!googleApiCalled) {\n\t\t\t\tonGoogleApiLoaded({ map, maps, ref: mapRef.current })\n\t\t\t\tsetGoogleApiCalled(true)\n\t\t\t}\n\n\t\t\twindow.google.maps.event.clearListeners(map, 'idle')\n\t\t\t// Idle event is fired when the map becomes idle after panning or zooming.\n\t\t\twindow.google.maps.event.addListener(map, 'idle', onIdle)\n\t\t}\n\t}, [googleApiCalled, map, maps, onChange, onGoogleApiLoaded, onIdle])\n\n\tuseEffect(() => {\n\t\t// clear listeners on unmount\n\t\treturn () => {\n\t\t\tif (map) {\n\t\t\t\twindow.google.maps.event.clearListeners(map, 'idle')\n\t\t\t}\n\t\t}\n\t}, [map])\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tref={mapRef}\n\t\t\t\tstyle={style}\n\t\t\t\tclassName=\"google-map\"\n\t\t\t\t// spread the events as props\n\t\t\t\t{...events?.reduce((acc, { name, handler } = {}) => {\n\t\t\t\t\tacc[name] = handler\n\t\t\t\t\treturn acc\n\t\t\t\t}, {})}\n\t\t\t/>\n\t\t\t{children && map && maps && (\n\t\t\t\t<MapMarkers map={map} maps={maps}>\n\t\t\t\t\t{children}\n\t\t\t\t</MapMarkers>\n\t\t\t)}\n\t\t</React.Fragment>\n\t)\n}\n\nMapComponent.propTypes = {\n\t/**\n\t * The Markers on the Map.\n\t */\n\tchildren: oneOfType([arrayOf(node), node]),\n\tstyle: object,\n\tdefaultCenter: object.isRequired,\n\tdefaultZoom: number.isRequired,\n\tonGoogleApiLoaded: func,\n\tonChange: func,\n\toptions: object,\n\t/**\n\t * The events to pass to the Google Maps instance (`div`).\n\t * @type {Array}\n\t * @example\n\t * [\n\t *  {\n\t *   name: 'onClick',\n\t *   handler: (event) => { ... }\n\t *  }\n\t * ]\n\t */\n\tevents: arrayOf(\n\t\tshape({\n\t\t\tname: string.isRequired,\n\t\t\thandler: func.isRequired,\n\t\t}),\n\t),\n}\n\nexport default MapComponent\n","import { arrayOf, bool, func, node, number, object, oneOf, oneOfType, string } from 'prop-types'\nimport React, { forwardRef } from 'react'\nimport { useGoogleMaps } from './hooks/useGoogleMaps'\nimport MapComponent from './map/map'\n\nconst GoogleMap = forwardRef(function GoogleMap(\n\t{\n\t\tapiKey = '',\n\t\tlibraries = ['places', 'geometry'],\n\t\tchildren = null,\n\t\tloadingContent = 'Google Maps is loading',\n\t\tidleContent = 'Google Maps is on idle',\n\t\terrorContent = 'Google Maps is on error',\n\t\tmapMinHeight = 'unset',\n\t\tcontainerProps = {},\n\t\tloadScriptExternally = false,\n\t\tstatus = 'idle',\n\t\tscriptCallback = () => {},\n\t\texternalApiParams = {},\n\t\t...props\n\t},\n\tref,\n) {\n\tconst renderers = {\n\t\tready: <MapComponent {...props}>{children}</MapComponent>,\n\t\tloading: loadingContent,\n\t\tidle: idleContent,\n\t\terror: errorContent,\n\t}\n\n\tconst _status = useGoogleMaps({\n\t\tapiKey,\n\t\tlibraries,\n\t\tloadScriptExternally,\n\t\tstatus,\n\t\texternalApiParams,\n\t\tcallback: scriptCallback,\n\t})\n\n\treturn (\n\t\t<div\n\t\t\tstyle={{ height: '100%', width: '100%', overflow: 'hidden', position: 'relative', minHeight: mapMinHeight }}\n\t\t\tref={ref}\n\t\t\t{...containerProps}\n\t\t>\n\t\t\t{renderers[_status] || null}\n\t\t</div>\n\t)\n})\n\nGoogleMap.propTypes = {\n\t...MapComponent.propTypes,\n\t/**\n\t * The Markers on the Map.\n\t */\n\tchildren: oneOfType([node, arrayOf(node)]),\n\t/**\n\t * Content to be displayed while the map is loading.\n\t */\n\tloadingContent: node,\n\t/**\n\t * Content to be displayed while the map is idle.\n\t */\n\tidleContent: node,\n\t/**\n\t * Content to be displayed when there is an error loading the map.\n\t */\n\terrorContent: node,\n\t/**\n\t * The minimum height of the map.\n\t */\n\tmapMinHeight: oneOfType([number, string]),\n\t/**\n\t * Props to be passed to the container div.\n\t */\n\tcontainerProps: object,\n\t/**\n\t * Whether to load the Google Maps script externally.\n\t * If true, the status prop will be used to control the loading of the script.\n\t * If false, the script will be loaded automatically.\n\t * @default false\n\t */\n\tloadScriptExternally: bool,\n\t/**\n\t * The forced status of the Google Maps script.\n\t * @default 'idle'\n\t */\n\tstatus: oneOf(['idle', 'loading', 'ready', 'error']),\n\t/**\n\t * The callback function to pass to the Google Maps script.\n\t * @default () => {}\n\t */\n\tscriptCallback: func,\n\t/**\n\t * Prop to be passed on to google map api while loading the script such as region & language\n\t * e.g. {region: 'JP', language: 'ja'} can be used to localize map in japanese\n\t */\n\texternalApiParams: object,\n}\n\nexport default GoogleMap\n"],"names":["useScript","script","forcedStatus","src","attributes","callbacks","onLoadCallback","onErrorCallback","elementIdToAppend","undefined","_useState","useState","status","setStatus","useEffect","_script$callbacks","_script$callbacks2","scriptToAdd","document","querySelector","createElement","async","setAttribute","Object","entries","length","map","_ref","key","value","getElementById","appendChild","body","setAttributeFromEvent","event","type","addEventListener","currentScriptStatus","getAttribute","setStateFromEvent","_script$callbacks3","_script$callbacks4","removeEventListener","useGoogleMaps","_URLSearchParams","apiKey","_ref$libraries","libraries","_ref$loadScriptExtern","loadScriptExternally","_ref$status","externalApiParams","callback","window","googleMapsCallback","apiParams","URLSearchParams","toString","join","id","isArraysEqualEps","arrayA","arrayB","eps","i","Math","abs","useMemoCompare","next","compare","previousRef","useRef","previous","current","isEqual","getLatLng","LatLng","latLng","lat","lng","e","createOverlay","container","pane","position","maps","drag","Overlay","_maps$OverlayView","_inheritsLoose","_this","call","handleMove","isTouch","that","_assertThisInitialized","x","touches","item","clientX","y","clientY","origin","get","left","top","pos","getProjection","fromLatLngToDivPixel","fromDivPixelToLatLng","Point","set","draw","onDrag","handleStart","eventName","style","cursor","onDragStart","moveHandler","addDomListener","getDiv","handleEnd","removeListener","onDragEnd","onAdd","draggable","trigger","getPanes","classList","add","projection","point","transform","width","height","onRemove","parentNode","clearInstanceListeners","removeChild","OverlayView","propTypes","element","isRequired","string","shape","number","object","bool","func","_ref$pane","_ref$zIndex","zIndex","children","useMemo","div","overlay","childrenProps","props","prev","setMap","createPortal","node","noop","MapMarkers","markers","Children","child","isValidElement","_ref2","_ref2$draggable","_ref2$onDragStart","_ref2$onDrag","_ref2$onDragEnd","cloneElement","_extends","React","EPS","MapComponent","_ref$children","_ref$style","margin","padding","defaultCenter","defaultZoom","_ref$onGoogleApiLoade","onGoogleApiLoaded","_ref$onChange","onChange","_ref$options","options","_ref$events","events","mapRef","prevBoundsRef","_useState2","setMaps","_useState3","googleApiCalled","setGoogleApiCalled","onIdle","useCallback","zoom","getZoom","bounds","getBounds","centerLatLng","getCenter","ne","getNorthEast","sw","getSouthWest","boundsArray","center","console","error","google","Map","ref","clearListeners","addListener","Fragment","className","reduce","acc","_temp","name","handler","oneOfType","arrayOf","GoogleMap","forwardRef","_ref$apiKey","_ref$loadingContent","loadingContent","_ref$idleContent","idleContent","_ref$errorContent","errorContent","_ref$mapMinHeight","mapMinHeight","_ref$containerProps","containerProps","_ref$scriptCallback","scriptCallback","_ref$externalApiParam","_objectWithoutPropertiesLoose","_excluded","renderers","ready","loading","idle","_status","overflow","minHeight","oneOf"],"mappings":"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"}